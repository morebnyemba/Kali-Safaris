# Backend Environment Variables - Example Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit .env files with real credentials to version control

# --- Mailu IMAP Fetcher Settings ---
# These are used by the fetch_mailu_attachments management command
MAILU_IMAP_HOST=mail.example.com
MAILU_IMAP_USER=your-email@example.com
MAILU_IMAP_PASS=your-secure-password

# --- Google Gemini API Settings ---
GEMINI_API_KEY=your-google-ai-studio-api-key-here

# --- Security Settings ---
# IMPORTANT: Generate a new, random secret key for production
# You can use: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
DJANGO_SECRET_KEY=your-VERY-strong-and-UNIQUE-production-secret-key-here
DJANGO_DEBUG=False  # Set to True only for local development, MUST be False in production

# --- Database Settings ---
# For PostgreSQL (production/docker)
DB_ENGINE=django.db.backends.postgresql
DB_NAME=whatsapp_crm_db
DB_USER=crm_user
DB_PASSWORD=your-secure-db-password
DB_HOST=db  # Use 'localhost' for local setup, 'db' for Docker
DB_PORT=5432

# For SQLite (local development only)
# DB_ENGINE=django.db.backends.sqlite3
# DB_NAME=db.sqlite3

# --- Domain and Host Settings ---
# Comma-separated list of hosts your Django app will serve
# Include backend domain, server IP, and frontend domain (for WebSocket connections)
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,backend.yourdomain.com,dashboard.yourdomain.com

# --- CSRF Trusted Origins ---
# Comma-separated list of trusted origins for CSRF protection (POST, PUT, etc.)
# Must include your frontend's full domain with the https scheme
CSRF_TRUSTED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,https://dashboard.yourdomain.com,https://backend.yourdomain.com

# --- CORS Settings ---
# Comma-separated list of origins allowed to make cross-site API requests
# Must include your frontend's full domain
CORS_ALLOWED_ORIGINS=http://localhost:5173,https://dashboard.yourdomain.com
CORS_ALLOW_CREDENTIALS=True

# --- Celery Settings ---
CELERY_BROKER_URL=redis://localhost:6379/0  # Use redis://redis:6379/0 for Docker
CELERY_TASK_TIME_LIMIT_SECONDS=1800

# --- Channels (WebSocket) Settings ---
REDIS_URL=redis://localhost:6379/1  # Use redis://redis:6379/1 for Docker

# --- JWT (JSON Web Token) Settings ---
JWT_ACCESS_TOKEN_LIFETIME_MINUTES=60
JWT_REFRESH_TOKEN_LIFETIME_DAYS=7
JWT_ROTATE_REFRESH_TOKENS=True
JWT_BLACKLIST_AFTER_ROTATION=True
JWT_UPDATE_LAST_LOGIN=False
JWT_SLIDING_TOKEN_LIFETIME_MINUTES=5
JWT_SLIDING_TOKEN_REFRESH_LIFETIME_DAYS=1

# --- Email Settings ---
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=mail.yourdomain.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@yourdomain.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=Your Company <noreply@yourdomain.com>

# --- Meta Integration (WhatsApp Business Platform) ---
META_VERIFY_TOKEN=your-meta-verify-token
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret
META_BUSINESS_ACCOUNT_ID=your-meta-business-account-id
META_ACCESS_TOKEN=your-meta-access-token
WHATSAPP_APP_SECRET=your-whatsapp-app-secret

# --- Application-Specific Settings ---
CONVERSATION_EXPIRY_DAYS=60
ADMIN_WHATSAPP_NUMBER=263771234567  # Format: country code + number (no + or spaces)
ADMIN_NOTIFICATION_FALLBACK_TEMPLATE_NAME=admin_notification_alert
INVOICE_PROCESSED_NOTIFICATION_GROUPS=System Admins,Sales Team

# --- Content Security Policy (CSP) Settings ---
BACKEND_DOMAIN_FOR_CSP=backend.yourdomain.com
FRONTEND_DOMAIN_FOR_CSP=dashboard.yourdomain.com

# --- Google Cloud Document AI Settings ---
GCP_PROJECT_ID=your-gcp-project-id
GCP_PROCESSOR_LOCATION=us  # or your preferred location
GCP_INVOICE_PROCESSOR_ID=your-processor-id

# --- Logging Settings (Optional) ---
DJANGO_LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# --- Omari Payments Settings ---
# Production: https://omari.v.co.zw/vsuite/omari/api/merchant/api/payment
# Sandbox: https://omari.v.co.zw/uat/vsuite/omari/api/merchant/api/payment
OMARI_API_BASE_URL=https://omari.v.co.zw/vsuite/omari/api/merchant/api/payment
OMARI_MERCHANT_KEY=your-omari-api-key-here

# --- Site Branding (Optional) ---
SITE_HEADER=Your Company CRM
